@model IEnumerable<MVC_CRUD.Models.contactCenterModels.Customer>
@{
    ViewBag.submenu = "Extend Expired Date Project";
}

<!-- Include Page Head -->
@RenderPage("~/Views/Gates/Head.cshtml")
<script src="~/Scripts/jquery-1.7.1.js"></script>

<body class="sb-left">
    @RenderPage("~/Views/Gates/Header.cshtml")
    <!-- APP MAIN ==========-->
    <main id="app-main" class="app-main">
        <div class="wrap">
            <section class="app-content">
                <div class="row">
                    <!-- DOM dataTable -->
                    <div class="col-sm-12">
                        <div class="widget">
                            <header class="widget-header">
                                <h4 class="widget-title">Expired File </h4>
                            </header><!-- .widget-header -->
                            <hr class="widget-separator">
                            <div class="widget-body">
                                <div class="table-responsive">
                                    <table id="default-datatable" data-plugin="DataTable" class="table table-striped table-responsive" cellspacing="0" width="100%">
                                        <thead>
                                            <tr>
                                                <th style="width:20px">#</th>
                                                <th style="width:120px">Project Name</th>
                                                <th style="width:140px">Customer</th>
                                                <th style="width:80px">Exp Date</th>
                                                <th style="width:100px">Param 1</th>
                                                <th style="width:100px">Param 2</th>
                                                <th style="width:100px">Param 3</th>
                                                <th style="width:100px">Param 4</th>
                                                <th style="width:100px">Param 5</th>

                                            </tr>
                                        </thead>
                                        <tbody>
                                            @foreach (var item in Model)
                                            {
                                                <tr>
                                                    <td>
                                                        <div class="btn-group">
                                                            <a class="edit-modal" href="#" data-href="@Url.Action("updateCustomerProject/" + item.CustProId, "Home")" data-toggle="modal" data-target="#editCustPro" data-id="@item.CustProId" data-name="@item.CustProName" data-exp="@item.CustProExpired" data-prm1="@item.Param1" data-prm2="@item.Param2" data-prm3="@item.Param3" data-prm4="@item.Param4" data-prm5="@item.Param5"><span class='badge badge-warning'><i class="fa fa-edit"></i></span></a>
                                                        </div>
                                                    </td>
                                                    <td>
                                                        @item.CustProName
                                                    </td>
                                                    <td>
                                                        @item.CustomerName
                                                    </td>
                                                    <td>
                                                        @String.Format("{0:dd MMMM yyyy}", item.CustProExpired)
                                                    </td>
                                                    <td>
                                                        @item.Param1
                                                    </td>
                                                    <td>
                                                        @item.Param2
                                                    </td>
                                                    <td>
                                                        @item.Param3
                                                    </td>
                                                    <td>
                                                        @item.Param4
                                                    </td>
                                                    <td>
                                                        @item.Param5
                                                    </td>
                                                </tr>
                                            }
                                        </tbody>
                                    </table>
                                </div>
                            </div><!-- .widget-body -->
                        </div><!-- .widget -->
                    </div>
                </div><!-- END column -->

        </div><!-- .row -->
        </section><!-- .app-content -->
        </div><!-- .wrap -->


        <div class="modal fade" id="editCustPro" style="background: rgba(249, 191, 59, .2)">
            <div class="modal-dialog">

                <!-- Modal content-->
                <div class="modal-content">
                    <div class="modal-header">
                        <h4 class="modal-title"><button class="btn btn-warning btn-raised"><i class="fa fa-pencil-square"></i></button> &nbsp; Edit Customer Project</h4>
                    </div>
                    <form action="@Url.Action("updateCustomerProjectExpDate", "Home")" method="post">
                        <input type="hidden" name="CustProId" id="CustProId" value="">
                        <div class="modal-body">
                            <div id="ErrorMessage"></div>
                            <div class="col-sm-6">
                                <div class="form-group">
                                    <label class="control-label" for="inputSmall">Customer Project Name</label>
                                    <input type="text" id="CustProName" disabled name="CustProName" value="" class="form-control input-sm" placeholder="entry name of customer project" autofocus>
                                    <div id="NameError"></div>
                                </div>
                                <div class="form-group">
                                    <label class="control-label" for="inputSmall">Customer Project Expired</label>
                                    <div class="input-group date" id="form_dt" data-date="" data-date-format="dd-M-yyyy" data-link-field="dtp_input2" data-link-format="yyyy-mm-dd">
                                        <input type="text" id="CustProExpired" name="CustProExpired" value="" class="form-control" />
                                        <span class="input-group-addon">
                                            <span class="glyphicon glyphicon-calendar"></span>
                                        </span>
                                        <input type="hidden" id="dtp_input2" value="" />
                                    </div>
                                    <div id="ManagerError"></div>
                                </div>
                                <div class="form-group">
                                    <label class="control-label" for="inputSmall">Parameter 1</label>
                                    <input type="text" id="Param1" disabled name="Param1" value="" class="form-control input-sm" placeholder="entry first parameter">
                                    <div id="SkillError"></div>
                                </div>
                                <div class="form-group">
                                    <label class="control-label" for="inputSmall">Parameter 2</label>
                                    <input type="text" id="Param2" disabled name="Param2" value="" class="form-control input-sm" placeholder="entry first parameter">
                                    <div id="PassError"></div>
                                </div>
                            </div>
                            <div class="col-sm-6">
                                <div class="form-group">
                                    <label class="control-label" for="inputSmall">Parameter 3</label>
                                    <input type="text" id="Param3" disabled name="Param3" value="" class="form-control input-sm" placeholder="entry first parameter">
                                    <div id="StatusError"></div>
                                </div>
                                <div class="form-group">
                                    <label class="control-label" for="inputSmall">Parameter 4</label>
                                    <input type="text" id="Param4" disabled name="Param4" value="" class="form-control input-sm" placeholder="entry first parameter">
                                    <div id="NumError"></div>
                                </div>
                                <div class="form-group">
                                    <label class="control-label" for="inputSmall">Parameter 5</label>
                                    <input type="text" id="Param5" disabled name="Param5" value="" class="form-control input-sm" placeholder="entry first parameter">
                                    <div id="NumError"></div>
                                </div>
                                <div class="form-group submitMaster">
                                    <button type="button" class="btn btn-default btn-raised btn-sm" data-dismiss="modal">Close</button>
                                    <a class="btn btn-warning btn-raised btn-sm submit edit-modal" data-toggle="modal" data-target="#update"><i class="fa fa-check-circle-o"></i> &nbsp; Change Project</a>
                                    <div class="modal fade" id="update" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                                        <div class="modal-dialog modal-sm">
                                            <div class="modal-content">
                                                <div class="modal-header">
                                                    Confirm Update
                                                </div>
                                                <div class="modal-body">
                                                    Are you sure ?
                                                </div>
                                                <div class="modal-footer">
                                                    <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
                                                    <button type="submit" class="btn btn-danger btn-ok">Update</button>

                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="modal-footer"></div>
                        </div>
                    </form>
                </div>

            </div>
        </div>


        <!-- Include Page Footer -->
        @RenderPage("~/Views/Gates/Footer.cshtml")

        <!-- Include Page Foot -->
        @RenderPage("~/Views/Gates/Foot.cshtml")

    </main>
    <!--========== END app main -->

</body>


<script>
    //JQuery No Conflict
    var noConflict = jQuery.noConflict();

    //Edit Customer Project
    noConflict(document).on("click", ".edit-modal", function () {
        var id = $(this).attr("data-id");
        var name = $(this).attr("data-name");
        var exp = $(this).attr("data-exp");
        var prm1 = $(this).attr("data-prm1");
        var prm2 = $(this).attr("data-prm2");
        var prm3 = $(this).attr("data-prm3");
        var prm4 = $(this).attr("data-prm4");
        var prm5 = $(this).attr("data-prm5");

        $("#CustProId").prop("value", id);
        $("#CustProName").prop("value", name);
        $("#CustProExpired").prop("value", exp);
        $("#Param1").prop("value", prm1);
        $("#Param2").prop("value", prm2);
        $("#Param3").prop("value", prm3);
        $("#Param4").prop("value", prm4);
        $("#Param5").prop("value", prm5);
    });

    noConflict(document).ready(function () {
        //Validation on Create Customer Project
        var form = document.getElementById("formCreate");
        var cust = document.getElementById("CustomerId");
        var name = document.getElementById("cekCustProName");
        var param1 = document.getElementById("cekParam1");
        var form1 = document.getElementById("cc");

        function validation() {
            if (cust.value && name.value && param1.value != "") {
                $('.submit').prop('disabled', false);
                form.onsubmit = function () { return true };
                form1.onsubmit = function () { return true };
            }
            else {
                $('.submit').prop('disabled', true);
                form.onsubmit = function () { return false };
                form1.onsubmit = function () { return false };
            }
        }

        $("#createCustPro").click(function () {
            $("#CreateModal").modal();
        });
        $(".createSelect").selectpicker({
            style: "btn-success btn-outline btn-sm",
        });
        $(".updateSelect").selectpicker({
            style: "btn-warning btn-outline btn-sm",
        });

        $("#cc").click(function () {
            $("#myModal").modal();
        });

        $("#update").click(function () {
            $("#myModal").modal();
        });

    });
</script>